import{j as e}from"./index-B8yjoQuT.js";function a(){return e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-16 text-left",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-gray-900 mb-10 text-center",children:"The Realisation: Recomputing Everything Is Wasteful"}),e.jsx("p",{className:"text-gray-500 mb-8 text-center italic",children:"Posted on 2026-01-07"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"The Progress Bar that Never Ends"}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"My parallel pipeline was a thing of beauty. I could drag a folder of 10,000 images onto the window, and watch 32 CPU threads devour it. The fans would spin up, the progress bar would fly across the screen, and 45 seconds later, I had my results."}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"Then I closed the app. And opened it again. And dragged the same folder in."}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"And waited another 45 seconds."}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:'The "Lightbulb" Moment'}),e.jsxs("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:['It seems obvious in hindsight, but in the heat of "getting it working," I had ignored a fundamental truth: ',e.jsx("strong",{children:"My photos don't change."})]}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"A picture taken in 2012 and stored on my NAS hasn't been modified in a decade. Why was I spending expensive CPU cycles decoding and hashing it every single time I wanted to organise my library?"}),e.jsxs("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:["I realised that for this tool to be actually ",e.jsx("em",{children:"usable"}),"—to be something I could open, tweak a filter, and close without feeling dread—it needed ",e.jsx("strong",{children:"Memory"}),"."]}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Defining the Cache"}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:`I grabbed a notebook (paper is still the best IDE) and sketched out what a caching system would actually look like. It wasn't just "save the results." It had strict requirements:`}),e.jsxs("ul",{className:"list-disc list-inside mb-8 text-lg text-gray-700 leading-relaxed space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Persistence:"})," It has to survive application restarts. (Goodbye, ",e.jsx("code",{children:"std::map"}),")."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Invalidation:"})," If I ",e.jsx("em",{children:"do"})," edit a photo, the cache must know instantly. Stale data is worse than no data."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Versioning:"}),' If I improve my hashing algorithm next week, I need a way to tell the database "throw away the old hashes, they are garbage now."']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Zero Config:"})," I didn't want to install a PostgreSQL server just to run my desktop app."]})]}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"The Candidate: SQLite"}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"I briefly considered using a massive JSON file or a custom binary format. Then I remembered I wanted to keep my sanity."}),e.jsxs("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:["SQLite was the only logical choice. It’s serverless, it’s single-file, and it has transactional integrity. If my app crashes halfway through writing a cache entry, the database won't get corrupted. Plus, Qt has excellent support for it via ",e.jsx("code",{children:"QSqlDatabase"}),"."]}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"The decision was made. Now I just had to design a schema that could identify a file uniquely without actually reading it."}),e.jsx("img",{src:"/images/photoboss/pipeline-cache-stage.png",alt:"Image processing pipeline showing cache lookup stage before hashing",className:"rounded-xl shadow-md mx-auto transform transition-transform duration-300 hover:scale-105 mb-10 w-full object-contain"})]})}export{a as default};
