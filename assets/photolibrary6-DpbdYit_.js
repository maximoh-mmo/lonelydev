import{j as s}from"./index-vpKu_s3s.js";function i(){return s.jsxs("main",{className:"max-w-3xl mx-auto px-6 py-12 text-gray-800",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Designing a Persistent Hash Cache with SQLite"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"Posted on 2026-01-21"}),s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"File Identity"}),s.jsx("p",{className:"mb-6",children:"A file is identified by:"}),s.jsxs("ul",{className:"list-disc list-inside mb-8 space-y-1",children:[s.jsx("li",{children:"Path"}),s.jsx("li",{children:"Size"}),s.jsx("li",{children:"Modification time"})]}),s.jsx("p",{className:"mb-8",children:"If all three match, the file is assumed unchanged."}),s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Schema Design"}),s.jsx("p",{className:"mb-6",children:"The database schema includes:"}),s.jsxs("ul",{className:"list-disc list-inside mb-8 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"files"})," — file identity and metadata"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"hash_methods"})," — algorithm name and version"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"hashes"})," — computed values"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"meta"})," — schema versioning"]})]}),s.jsx("p",{className:"mb-6",children:"This allows:"}),s.jsxs("ul",{className:"list-disc list-inside mb-8 space-y-1",children:[s.jsx("li",{children:"Safe upgrades"}),s.jsx("li",{children:"Algorithm invalidation"}),s.jsx("li",{children:"Fine-grained cache hits"})]}),s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Cache as a Pipeline Stage"}),s.jsx("p",{className:"mb-6",children:"The cache isn’t a bolt-on optimisation — it’s a first-class pipeline stage."}),s.jsx("p",{className:"mb-6",children:"If all required hashes are present:"}),s.jsxs("ul",{className:"list-disc list-inside mb-8 space-y-1",children:[s.jsx("li",{children:"Disk IO is skipped"}),s.jsx("li",{children:"Decoding is skipped"}),s.jsx("li",{children:"Hashing is skipped entirely"})]}),s.jsx("p",{className:"mb-8",children:"Results are injected directly back into the pipeline."}),s.jsx("img",{src:"/images/photoboss/sql-schema.png",alt:"SQLite schema for the hash cache",className:"rounded-lg shadow-lg mb-10 w-full object-contain"})]})}export{i as default};
