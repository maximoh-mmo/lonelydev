import{j as e}from"./index-B8yjoQuT.js";function a(){return e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-16 text-left",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-gray-900 mb-10 text-center",children:"Finding the Needle in the Haystack: Similarity Search & Grouping"}),e.jsx("p",{className:"text-gray-500 mb-8 text-center italic",children:"Posted on 2026-02-17"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"The Final Piece"}),e.jsxs("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:["We have a pipeline. We have a threaded worker pool. We have a robust, versioned database cache. The machine is built. Now it’s time to turn it on and do what we came here to do: ",e.jsx("strong",{children:"Find the duplicates."})]}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"The Grouping Strategy"}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:'I realised early on that a "One Pass Fits All" approach was wrong. Grouping exact byte-matches is easy (and objective). Grouping "similar" images is fuzzy (and subjective).'}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"I adopted a sieve-like approach:"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Layer 1: The Exact Match"}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"First, I run a blazing fast pass using SHA-256. If two files have the same hash, they are the same file. Period. This cleared out about 4,000 files from my library instantly. These are the safe kills."}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Layer 2: The Visual Match"}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"This is where the math gets fun. I compare every image against every other image (using an indexing tree to avoid O(n^2) madness, of course)."}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:'I defined a "Similarity Score" based on a weighted average of:'}),e.jsx("pre",{className:"bg-gray-900 text-green-300 text-sm p-4 rounded-xl mb-8 overflow-x-auto text-left font-mono whitespace-pre leading-relaxed shadow-md",children:`struct Config {
    double strongThreshold = 0.90;
    
    // Components
    double pHashWeight = 0.45;  // Shape/Structure
    double dHashWeight = 0.25;  // Gradients
    double aHashWeight = 0.20;  // Average Color
    double ratioWeight = 0.10;  // Aspect Ratio
};`}),e.jsxs("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:["Why mix them? Because ",e.jsx("code",{children:"pHash"})," is great at surviving compression artifacts, but sometimes thinks a building looks like a book. ",e.jsx("code",{children:"aHash"}),` is great at color, but fails if you crop the image. Together, they form a jury. If the jury votes 90% "Yes", it's a match.`]}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"The Result (and the False Positives)"}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:'I pressed "Scan". The pipeline roared to life. The cache hits flew by. And then, the "Groups Found" counter started ticking up.'}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"I opened the result viewer (which I finally styled in a sleek Dark Mode, because we aren't savages), and there they were."}),e.jsxs("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:['A photo of my dog from 2018. Next to it, a slightly smaller version labeled "Instagram Export". Next to that, a version with a sepia filter. ',e.jsx("strong",{children:"PhotoBoss knew they were the same."})]}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"But it wasn't perfect. It also decided that a picture of a grey wall was identical to a picture of a grey sky. And it grouped two completely different sunsets because the color palettes were mathematically identical."}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:'The similarity engine is like an over-eager puppy right now. It finds the ball, but sometimes it brings you a rock instead. I need to tighten the scoring thresholds and maybe introduce a "safety" check for edge cases.'}),e.jsx("img",{src:"/images/photoboss/dark_mode_preview.png",alt:"Dark mode preview of the duplicate photo groups",className:"rounded-xl shadow-md mx-auto transform transition-transform duration-300 hover:scale-105 mb-10 w-full object-contain"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"What’s Next?"}),e.jsxs("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:["So, I can ",e.jsx("em",{children:"see"})," the duplicates. But I can't easily kill them yet."]}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:`I have a thumbnail view, but the actual "Delete" button is terrifyingly effective. I need to build a "Review & Confirm" workflow that feels safe to use on 15 years of memories. UX is hard, especially when the cost of a misclick is deleting your child's first steps.`}),e.jsx("p",{className:"text-lg text-gray-700 mb-8 leading-relaxed",children:"The engine is running. Now I just need to learn how to steer it."})]})}export{a as default};
